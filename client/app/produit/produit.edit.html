<form novalidate name="vm.form" role="form"></form>
    <!--  ng-model-options="{ updateOn: 'default', debounce: { 'default': 100, 'blur': 0 } }"> -->

    <div id="wrapper">

        <div id="mainContent">

            <div class="panel panel-default noborder">

                <div class="panel-heading"><b> {{"FICHE_PRODUIT"|translate}}</b>
                </div>

                <div class="panel-body">

                    <div class="row">

                        <div class="col-md-6 form-group">
                            <div class="form-group" ng-class="{'has-error': vm.form.$submitted && vm.form.categorieId_input.$invalid}">
                                <label for="categorieId_select_id">
                                    {{"CATEGORIE"|translate}}<span style="color: red;" uib-tooltip={{"VALEUR_OBLIGATOIRE"|translate}}>*</span>
                                </label>
                                <select required
                                        data-kendo-combo-box
                                        data-k-options="vm.selectOptionsCategorie"
                                        data-ng-model="vm.item.categorieId._id"
                                        data-k-ng-model="vm.item.categorieId._id"
                                        focus-on="categorie_focus"
                                        id="categorieId_select_id"
                                        name="categorieId_select"
                                        style="width: 100%">
                                </select>
                                <validate-input form="vm.form" field="vm.form.categorieId_select"></validate-input>
                            </div>
                        </div>

                        <div class="col-md-6 form-group">
                            <div class="form-group" ng-class="{'has-error': vm.form.$submitted && vm.form.produit_input.$invalid}">
                                <label for="produit_input_id">
                                    {{"PRODUIT"|translate}}<span style="color: red;" uib-tooltip={{"VALEUR_OBLIGATOIRE"|translate}}>*</span>
                                </label>
                                <input required
                                       autocomplete="off"
                                       class="k-textbox"
                                       data-ng-model="vm.item.produit"
                                       id="produit_input_id"
                                       name="produit_input"
                                       style="width: 100%;"
                                       type="text"/>
                                <validate-input form="vm.form" field="vm.form.produit_input"></validate-input>
                            </div>
                        </div>

                    </div>

                    <div class="row">

                        <div class="col-md-6 form-group">
                            <label for="marque_input_id">
                                {{"MARQUE"|translate}}
                            </label>
                            <select required
                                    data-kendo-combo-box="vm.marqueWidget"
                                    data-k-options="vm.selectOptionsMarque"
                                    data-k-ng-model="vm.item.marque"
                                    id="marque_input_id"
                                    name="marque_input"
                                    style="width: 100%">
                            </select>
                        </div>

                        <div class="col-md-6 form-group">
                            <label for="description_input_id">
                                {{"DESCRIPTION"|translate}}
                            </label>
                            <input  autocomplete="off"
                                    class="k-textbox"
                                    data-ng-model="vm.item.description"
                                    id="description_input_id"
                                    name="description_input"
                                    style="width: 100%;"
                                    type="text"/>
                        </div>

                    </div> <!-- end row -->

                </div>
            </div>
        </div> <!-- end maincontent -->

        <div id="sideBar">

            <div class="panel panel-default" >

                <div class="panel-heading" style="color: white; background-color: #1976D2"><b>Conditionnement</b>
                    <i class="material-icons md-18">help_outline</i>
                </div>

                <div class="panel-body" style="font-weight: normal; color: white; background-color: #2196F3">

                    <div class="row" style="margin-bottom: 10px;">

                        <div class="col-md-4 form-group">
                            <label for="quantite_input_id">
                                {{"QUANTITE"|translate}}
                            </label>
                            <input autocomplete="off"
                                   data-kendo-numeric-text-box
                                   data-k-min="0"
                                   id="quantite_input_id"
                                   name="quantite_input"
                                   ng-model="vm.item.quantite"
                                   style="width: 100%;"
                                   type="number"/>
                        </div>
                        <div class="col-md-8 form-group">
                            <label for="formatId_input_id">
                                {{"FORMAT"|translate}}
                            </label>
                            <select data-kendo-combo-box
                                    data-k-options="vm.selectOptionsFormat"
                                    data-k-ng-model="vm.item.formatId._id"
                                    id="formatId_input_id"
                                    name="formatId_select"
                                    style="width: 100%">
                            </select>
                        </div>

                    </div>

                    <div class="row">

                        <div class="col-md-4 form-group">
                            <label for="nombre_input_id">
                                {{"NOMBRE"|translate}}
                            </label>
                            <input autocomplete="off"
                                   data-kendo-numeric-text-box
                                   data-k-min="0"
                                   id="nombre_input_id"
                                   name="nombre_input"
                                   ng-model="vm.item.nombre"
                                   style="width: 100%;"
                                   type="number"/>
                        </div>
                        <div class="col-md-8 form-group">
                            <label for="unite_input_id">
                                {{"UNITE"|translate}}
                            </label>
                            <select data-kendo-combo-box
                                    data-k-options="vm.selectOptionsUnite"
                                    data-k-ng-model="vm.item.uniteId._id"
                                    id="unite_input_id"
                                    name="uniteId_select"
                                    style="width: 100%">
                            </select>
                        </div>

                    </div>
                </div>
            </div>
        </div>
     </div> <!--id="wrapper"-->


    <!-- Historique INSERT Only -->
    <!--
 <div class="panel panel-default" style="border:0">

     <div class="panel-heading" style="border-bottom: 2px solid #1976D2; background-color:  white"><b>Prix</b>

     </div>

     <div class="panel-body" style="border: 0">

<div class="row" ng-show="vm.state == 'dsInsert'">

     <div class="col-md-2 form-group">
         <label for="prix_insert_input_id">
             {{"PRIX"|translate}}
         </label>
         <input autocomplete="off"
                data-kendo-numeric-text-box
                data-k-min="0"
                id="prix_insert_input_id"
                name="prix_input"
                ng-model="vm.insertHisto.prix"
                style="width: 100%;"
                type="number"/>
     </div>

     <div class="col-md-1 form-group">
         <label for="enPromotion_toogle_id">
             {{"PROMOTION"|translate}}
         </label>
         <toggle id="enPromotion_toogle_id"
                 ng-model="vm.insertHisto.enPromotion"
                 ng-change="changed()" on="Oui" off="Non">
         </toggle>
     </div>

     <div class="col-md-3 form-group">
         <label for="epicerieId_insert_input_id">
             {{"EPICERIE"|translate}}
         </label>
         <select data-kendo-combo-box
                 data-k-options="vm.selectOptionsEpicerie"
                 data-k-ng-model="vm.insertHisto.epicerieId"
                 id="epicerieId_insert_input_id"
                 name="epicerieId_select2"
                 style="width: 100%;">
         </select>
     </div>

     <div class="col-md-2 form-group">
         <label for="date_insert_input_id">
             {{"DATE"|translate}}
         </label>
         <input data-kendo-date-picker
                data-k-options="vm.datePickerOptions"
                data-k-ng-model="vm.insertHisto.date"
                id="date_insert_input_id"
                style="width: 100%;"/>
     </div>

     <div class="col-md-2 form-group">
         <button class="btn btn-primary" style="margin-top:27px;"
                 data-toggle="tooltip"
                 ng-click="vm.createHisto()">
             Ajouter
         </button>
     </div>
     </div>
     </div>
 </div>
 -->
    <!-- FIN Historique INSERT only -->


    <!-- Historique EDIT only -->
    <div class="row" style="margin: 0px;">
        <table class="table">
            <thead>
                <tr>
                    <th class="col-md-2 col-sm-2">
                        <a href="javascript:void(0)" style="text-decoration:none; color:black;"
                           ng-click="vm.sorting.reverse = !vm.sorting.reverse">
                            {{"PRIX"|translate}}
                            <span ng-show="!vm.sorting.reverse"><i class="material-icons md-16">arrow_drop_down</i></span>
                            <span ng-show="vm.sorting.reverse"><i class="material-icons md-16">arrow_drop_up</i></span>
                        </a>
                    </th>
                    <th class="col-md-3 col-sm-3">
                        {{"EPICERIE"|translate}}
                    </th>
                    <th class="col-md-2 col-sm-2">
                        {{"DATE"|translate}}
                    </th>
                    <th class="col-md-2 col-sm-2">
                    </th>
                    <th class="col-md-2 col-sm-2">
                    </th>
                    <th class="col-md-1 col-sm-2">
                    </th>
                </tr>
            </thead>

            <tbody>
                 <tr>
                    <!--data-k-format="'c'"-->
                    <td class="col-md-2 col-sm-2">
                        <input required
                               autocomplete="off"
                               data-kendo-numeric-text-box
                               data-k-min="0"
                               id="prix_input_id"
                               name="prix_input"
                               ng-model="vm.insertHisto.prix"
                               type="number"
                               style="width: 100%"/>
                               <validate-input form="vm.form" field="vm.form.prix_input"></validate-input>
                    </td>
                    <td class="col-md-3 col-sm-3">
                        <select required
                                data-kendo-combo-box
                                data-k-options="vm.selectOptionsEpicerie"
                                data-k-ng-model="vm.insertHisto.epicerieId"
                                ng-model="vm.insertHisto.epicerieId"
                                id="epicerieId_select_edit_id"
                                name="epicerieId_select"
                                style="width: 100%">
                        </select>
                        <validate-input form="vm.form" field="vm.form.epicerieId_select"></validate-input>
                    </td>
                    <td class="col-md-2 col-sm-2">
                        <input data-kendo-date-picker
                               data-k-options="vm.datePickerOptions"
                               ng-model="vm.insertHisto.date"
                               id="date_input_id2"
                               name="date_input"
                               style="width: 100%"/>
                    </td>
                    <td class="col-md-2 col-sm-2">
                        <toggle id="enPromotion_toogle_id"
                                ng-model="vm.insertHisto.enPromotion"
                                ng-change="changed()" on="En promotion" off="Prix régulier">
                        </toggle>
                    </td>
                    <td class="col-md-2 col-sm-2">
                        <div style="text-align:left; top:25px; padding-right: 30px">
                            <button class="btn btn-primary"
                                    data-toggle="tooltip"
                                    ng-click="vm.createHisto()">
                                Ajouter
                            </button>
                        </div>
                    </td>
                    <td class="col-md-1 col-sm-1">
                    </td>
                </tr>
                <tr ng-show="vm.item.historiques.length > 0"
                    ng-hide="histo.statut == 'D'"
                    data-ng-repeat="histo in (vm.item.historiques).slice(((vm.pagination.currentPage-1)*vm.pagination.itemsPerPage),
                    ((vm.pagination.currentPage)*vm.pagination.itemsPerPage))  | orderBy : vm.sorting.type:vm.sorting.reverse">
                    <td class="col-md-2 col-sm-2">
                        {{histo.prix | currency}}
                    </td>
                    <td class="col-md-3 col-sm-3">
                        <span>{{histo.epicerie}}</span>
                        <span>{{histo.epicerieId.epicerie}}</span>
                    </td>
                    <td class="col-md-2 col-sm-2">
                        {{histo.date | amDateFormat:'YYYY/MM/DD' }}
                    </td>
                    <td class="col-md-2 col-sm-2">
                        {{histo.enPromotion}}
                    </td>

                    <td class="col-md-2 col-sm-2">
                        {{(histo.prix) | coutPar:vm.item.quantite:vm.item.nombre:vm.item.uniteId.operation:vm.item.uniteId.nombre:vm.item.uniteId.coutParId.abreviation}}</span>
                    </td>
                    <td class="col-md-1 col-sm-1" style="text-align: left;">
                        <button class="btn btn-danger btn-sm"
                                data-toggle="tooltip"
                                ng-click="vm.deleteHisto(histo)"
                                uib-tooltip={{DETRUIRE_HISTORIQUE|translate}}>
                                <i class="material-icons md-16">delete</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- FIN Historique edit only -->

    <br>

    <div class="row">
        <br>
        <div class="col-md-4 pull-right" style="text-align: right">
            <div class="btn-group">
                <button class="btn btn-primary btn"
                        data-toggle="tooltip"
                        ng-click="vm.save(vm.form, vm.item, false)">
                        <span class="fa fa-check"></span>
                        {{"ENREGISTRER"|translate}}
                </button>
                <button type="button"
                        class="btn btn-primary dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="" ng-click="vm.form.$submitted = true; vm.save(vm.form, vm.item, true)">{{"AJOUTER_AUTRE_PRODUIT"|translate}}></a></li>
                </ul>
            </div>
            <button class="btn btn-danger btn"
                    data-toggle="tooltip"
                    ng-click="vm.cancel()">
                    <span class="fa fa-times"></span>
                    {{"ANNULER"|translate}}
            </button>
        </div>
    </div>

</form>


